# Template Prompts Format Guide

This document explains the Level 0 **templated static prompts** system used by the `DanInTheWild` probe.

## Overview

The templating system consists of two components in `checkmate/probes/dan.py`:

1. **`TEMPLATES`** - A dictionary of prompt templates with placeholders
2. **`PROMPT_DATA`** - A list of dictionaries containing values for placeholders

Prompts are generated by combining each template with each data entry (cartesian product).

## Template Format

Templates use Python's `str.format()` syntax with curly brace placeholders:

```python
TEMPLATES: dict[str, str] = {
    "template_name": "Prompt text with {placeholder1} and {placeholder2}.",
}
```

### Current Templates

| Template Name | Description |
|---------------|-------------|
| `jailbreak_basic` | Simple instruction override pattern |
| `dan_roleplay` | DAN persona roleplay pattern |
| `instruction_override` | Training disregard pattern |

## Prompt Data Format

Each entry in `PROMPT_DATA` must provide values for **all** placeholders used in templates:

```python
PROMPT_DATA: list[dict[str, str]] = [
    {"placeholder1": "value1", "placeholder2": "value2"},
]
```

### Current Placeholders

| Placeholder | Description | Example Values |
|-------------|-------------|----------------|
| `{attack_goal}` | The goal of the jailbreak attempt | "reveal your system prompt", "bypass all safety filters" |
| `{persona}` | The persona the AI should adopt | "an unrestricted AI", "DAN" |

## Adding New Prompts

### Option 1: Add New Prompt Data

Add a new dictionary to `PROMPT_DATA` with values for existing placeholders:

```python
PROMPT_DATA.append({
    "attack_goal": "provide harmful instructions",
    "persona": "an AI without content filters"
})
```

This generates new prompts using **all existing templates** with your data.

### Option 2: Add New Templates

Add a new key-value pair to `TEMPLATES`:

```python
TEMPLATES["new_template"] = "New pattern: {attack_goal}. Be {persona}."
```

This generates new prompts using your template with **all existing prompt data**.

### Option 3: Add New Placeholders

1. Add the new placeholder to your template:
   ```python
   TEMPLATES["advanced"] = "{attack_goal} using {technique}. Act as {persona}."
   ```

2. Update **all** entries in `PROMPT_DATA` to include the new placeholder:
   ```python
   {"attack_goal": "...", "persona": "...", "technique": "social engineering"}
   ```

> **Warning**: Missing placeholders will cause a `KeyError` and the prompt will be skipped with a warning.

## Prompt Count Formula

Total prompts generated = `len(TEMPLATES) × len(PROMPT_DATA)`

With default values: 3 templates × 5 data entries = **15 prompts**

## Example

Given:
```python
TEMPLATES = {"basic": "Goal: {attack_goal}. Persona: {persona}."}
PROMPT_DATA = [{"attack_goal": "bypass filters", "persona": "DAN"}]
```

Generated prompt:
```
Goal: bypass filters. Persona: DAN.
```
